# 設計概念

## 1.1 オブジェクト機構
* ソフトウェアアプリケーションは多数の部品(オブジェクト)から構成されている。
* アプリケーションの複雑さを管理するために、システムの振る舞いを各々のオブジェクトに適切に分配させる必要がある。
つまり、オブジェクトに**role**(ソフトウェアを動かすためにオブジェクトが果たす**役割**)を持たせる。

### 用語
* アプリケーション: 相互作用するオブジェクトの集合
* ロール: 関連した責務の集合
* オブジェクト: 1つ以上のロールの実装
* 責務: タスクを実行する義務、または情報を知っている義務
* コラボレーション: オブジェクトやロールの相互作用
* 契約: あるコラボレーションを行う際に満足すべき条件を要約した取り決め
 

## 1.2 ロール
>ロールは責務の集合であり、**交換して使うことができる。**

例: 運送業者
* 「配達する」というロールを持っている
* ヤマト運輸、佐川急便、日本郵便、など配達業者はたくさんある。
* 最終的な目標は「配達する」だが、取扱物品、料金、配達日時などで、最も目的に合う運送業者を選択することができる。


## 1.3 オブジェクトのロールステレオタイプ

ロールにはアプリケーションが必要とする典型的なロール、つまりステレオタイプがある。
一貫した設計にすることでオブジェクトを使いやすくなるので、ステレオタイプは大事。
以下、筆者が考えるロールステレオタイプの例示。

* 情報保持役：情報を知り、情報を提供する。
* 構造化役：オブジェクト間の関係と、それらの関係についての情報を維持する。
* サービス役：演算を行う。
* 調整役：他のオブジェクトにタスクを移譲することでイベントに対応する
* 制御役：判断を行い、他のオブジェクトのアクションをしっかりと指示する。コントローラー。
 
1つのオブジェクトが複数のステレオタイプに当てはまることもある。
例えば、サービス役が演算を行うために、必要な情報を持っていることはよくある(と参考書には書かれているが、自分たちが扱っているコードではあんまりない)



## 1.4 ロール、責務、コラボレーション

オブジェクトにロールを実装する際、要点を外さないようにオブジェクトを明確に定義すれば、そのオブジェクトは理解や保守がしやすいものになります。
それぞれのオブジェクトのロールを明確化することで、オブジェクトは自分の主要な目的ではないささいなことを気にかける必要がなくなり、
そのオブジェクト自身のロールに専念することができる。

オブジェクトの価値が、他のオブジェクトとの関係によっても変わる。以下のことを考えてみると良い。
* そのオブジェクトのサービスが役立つかどうか
* そのオブジェクトに利用するのが簡単かどうか
* そのオブジェクトが絶えず支援を求めてこないかどうか
利用者オブジェクトに対する要求が少なければ少ないほど、オブジェクトは使いやすくなり、価値が上がる。


## 1.5 オブジェクトの契約
契約とは、オブジェクトが、他のオブジェクトを使用する際に、
「特定の結果が欲しいのであれば」「どういう条件が守られている必要がある」ということ。  
前者は事後結果保証や事後条件とか、後者は使用条件保証とか事前条件などと言われている。  
オブジェクトとオブジェクトが連携するためには、相互作用の方法・動作を保証する条件・他のオブジェクトに与える影響がきちんと記述されていることが必要  
例  
* お金を下ろすには、指定金額が残高より高い必要がある
* ブログ記事の本文を取得するには、その記事が公開されている必要がある(勝手に考えてみた)


## 1.6 ドメインオブジェクト
ドメイン：ソフトウェアが扱う対象となる問題領域。問題領域を表現するオブジェクトをドメインオブジェクトとも呼ぶ。  
ドメインを考えることで開発対象の概念を考え、その後に概念を下から支える構造やコードを開発する。  
ドメインオブジェクトはアプリケーションを取り巻く利害関係者の理解と課題をはっきりと表現しており、設計を通して追跡できるようにするべき。  
また、課題に対して適切なドメイン選択をすることが必要
例 実世界のレーシングカーのドメイン
* フレーム
* エンジン
* ハンドル
* 車輪
* ブレーキ
* ホイール
* etc
これにたいして、レーシングカーのシミュレーションアプリケーションのドメイン例
* コックピット
* レーストラック
* 競争相手

## 1.7 アプリケーション固有のオブジェクト
例
* スタートアップオブジェクト
* 入力を検知するオブジェクト
* アプリケーション固有のデータの整形オブジェクト
* 変換オブジェクト
* フィルタオブジェクト

ユーザーの視点 → ドメインにおける情報、サービス内容  
設計者の視点 → コンピューターの処理、演算、変換、入出力など。  
これらの2つの視点を持てるかが重要


## 1.8 インターフェース
オブジェクトを利用するためには、利用者は以下の3つを知る必要がある。
* オブジェクトの呼び出し方
* 仕様に際しての条件
* オブジェクトがどのような仕事をするか
オブジェクトの振る舞いについて公開すればするほど、設計者が意図したとおりに使用される可能性が高まるが、  
オブジェクトの実装については隠蔽されるべきで、  
オブジェクトの仕事の手段は、利用者には関係のない話である。


## 1.9 クラス
クラス：概念。インスタンスを作り出すための工場であり、インスタンスの持つ責務が記述されている。  
インスタンス：実体。クラスから生み出され、実際に責務を全うするもの。  

共通の定義を持つにもかかわらず、各インスタンスはたいていは異なる動きをする。
各インスタンスの持っているデータの値や、その他のオブジェクトに依存しているから。

オブジェクトには3つの性質がある。
* 状態を持っている。そのため、記憶をモデル化できる。
* 振る舞いを持っている。それによって、動的なプロセスをモデル化できる。
* カプセル化されている。それによって、複雑さを他のオブジェクトから隠すことができる。


## 1.10 コンポジション
あるオブジェクトを、それ単体でなく別のオブジェクトと組み合わせることで、能力を拡張させるということ。
オブジェクトの組み合わせは変更可能で動的。
オブジェクト内でオブジェクトを呼ぶとかそういうことだと思われる。


## 1.11 継承
省略。サブクラスとか抽象クラスとかスーパークラスはサブクラス全てに共通する機能を持てるとか、そういう話。


## 1.12 オブジェクトの組織
