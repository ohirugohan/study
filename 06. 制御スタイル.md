# 6.1 制御スタイル
一貫した制御スタイルを決めて設計することが重要。  
制御と調整の責務を持つオブジェクトが存在する制御センター（control center、コントローラ）の設計方法を、この章で考えていく。

# 6.2&6.3 制御スタイルの選択肢とトレードオフ
この章では、集中型と委譲型について特に詳しく見ていく。  
また、スタイルは程度の問題で、「このスタイルはどのくらい集中型」とか、そんなニュアンス（？）

## 集中型
制御役のステレオタイプオブジェクトに、主要な判断の責務を全て割り当てる。  
亜種として、判断を行う責務を複数の制御役に割り当てる「集団型」というものもある。
トレードオフ
* 制御に関する判断が行われている場所をすぐに見つけることができる利点がある。
* 制御に関わるコードが複雑になる。  
    * これの対処として、判断を分割してイエス・ノーの回答を提供するヘルパーメソッドや、  判断のために必要な情報を返すヘルパーメソッドを作る、などのリファクタリングが可能。
* 制御役が情報保持役の内容に依存するようになるおそれがある
    * その結果、制御役は隠蔽されるべき詳細に依存されるようになるおそれがある。その詳細を制御役が持ってしまっているので。
* 複数のオブジェクトが、自分たちの制御役のアクションを通して、間接的に結合される
    * 制御下のオブジェクトAの内容を変えると、別の制御下オブジェクトBの内容も変えざるをえない場合もある
* コラボレータのする仕事が極端に少なくなる

## 委譲型
制御役以外の責務を持つオブジェクトにも判断を移譲し、制御役の判断は「何を行うべきか」を決定することに限られる。
トレードオフ
* 調整役の周囲に存在するオブジェクトが多くの責務を担うことになり、結果として調整役が管理すべきオブジェクトの数が減る
* 調整役と、調整される側の間のコラボレーションは、粒度の大きい、高いレベルのリクエストとなる。
* 各オブジェクトがコラボレートする相手のオブジェクトの種類がより少なくなり、1つの責務の変更が影響を及ぼす範囲が狭くなる
* 困難な作業を複数の設計者の間で分配することができるようになる
* 責務を極端に分配し過ぎると、イマイチなオブジェクトやコラボレーションが生み出されるおそれがある
    * 1つの利用者だけにしか利用されないサービス提供役のオブジェクト。制御役の中にヘルパーメソッドとして一体化されるべき。
    * 移譲元のオブジェクトと移譲先のオブジェクトとの間の複雑なコラボレーション。移譲されたリクエストとともに渡される情報が不十分なときに起こる。
    * コラボレーションが多いのに、仕事量が少ない

## 分散型
判断を行う責務を、1つのタスクの多くのオブジェクトにまたがって分配する。  
制御センターの位置や、主要な判断を担っているオブジェクトを見つけるのが困難になる。
この章ではあまり考えない。


筆者は、基本的には委譲型制御スタイルを推奨している。  
→ 責務の量が多すぎないオブジェクトのいない、バランスのとれたスタイルのため。
→ ただし、フレームワークの選別によっては、取れる制御スタイルに縛りが出てくる。

例：Javaアプリケーションの制御スタイル（ただし上記の例ではない）
ユーザーインターフェースのイベントを処理する制御センターを設計するとき、1つのヴィジェットにつき1つ制御役(リスナー)が割り当てられる。  
取れそうな設計は以下。
* 各々のヴィジェットに、対応した制御役を付かせる
    * イベントが何を意味するかを解読しなくても、各リスナーは自分が行うべきことを知っている
    * アクションを調整しなければならない(?)
    * コラボレータとの結びつきを同期させなければならない
        * リストの中の項目をクリックすることで、別のヴィジェットのリストに項目を追加する、など。
* 複数のヴィジェットからのリクエストをまとめて管理できる、大きな制御役を付かせる
    * ある特定のイベントが何を意味しているか解読する責務を、制御役に持たす必要があるデメリット
    * ただし、制御役の周囲の状況が変化した場合に、制御下にあるオブジェクトをリフレッシュして調整し直すのは簡単


# 6.4 制御センターを開発する
制御センターは、アプリケーション内で一貫した(?)コラボレーションパターンがなければならない。例えば、以下を制御するときなど。
* ユーザーが作り出したイベント
* 複雑なプロセス
* 特定の地域内での作業
* アプリケーションの制御下にある外部のソフトウェア

コラボレーションパターンは一貫している必要があるが、制御スタイルはそれぞれの制御の状況に合うものを選択する。  
類似したユースケースが類似した制御スタイルの設計になることもあるが、複数の制御スタイルが1つのアプリケーション内で問題なく共存する可能性もある。  
制御スタイルを開発する際に決めること
* どのように判断が行われるべきか
* どのオブジェクトがその判断を行うべきか
* 判断は移譲されるべきか
* どのような移譲パターンが確立され、繰り返されるべきか

一般的には、類似したものが同じように動作するようにコラボレーションを設計するのが望ましい。
